<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="/static/styles.css">
  </head>
  <body class="content">
    <div class="menu">
      <div class="menu__inner">
        <h1 class="menu__header">
          <a href=/>Obsidian Static Blog Generator</a>
        </h1>
        <ul class="menu__links">
            <li class="menu__link">
              <a href="/about.html">About</a>
            </li>
            <li class="menu__link">
              <a href="/index.html">Posts</a>
            </li>
        </ul>
      </div>
    </div>
    <div class="content__inner">
      <div class="page">
        <h1>Hello Obsidian Blog</h1>
<p>This is a first post in the blog generated by <code>obsidian-blog</code> from <a href="https://obsidian.md/" referrerpolicy="no-referrer" rel="noopener noreferrer" target="_blank" title="Obsidinan.md">Obsidinan.md</a> vault.</p>
<p><code>obsidian-blog</code> is a simple static site generator like <a href="https://jekyllrb.com/" referrerpolicy="no-referrer" rel="noopener noreferrer" target="_blank" title="Jekyll">Jekyll</a> written in Python, allows you to use your notes to write blog posts. Imagin you can write you blog posts right in obsidian in a <a href="https://www.youtube.com/watch?v=7GqQKCT0PZ4" referrerpolicy="no-referrer" rel="noopener noreferrer" target="_blank" title="MoCs">MoCs</a> manner, getting all wild power of <a href="https://en.wikipedia.org/wiki/Niklas_Luhmann#Note-taking_system_(Zettelkasten)" referrerpolicy="no-referrer" rel="noopener noreferrer" target="_blank" title="Zettelkasten">Zettelkasten</a>, and avoiding content duplication.</p>
<p>Sounds interesting, isn't it?</p>
<p>But need to mention, <code>obsidian-blog</code> is not a ready to go blog, it's a static site generator orchestrates <a href="https://handlebarsjs.com/" referrerpolicy="no-referrer" rel="noopener noreferrer" target="_blank" title="handlebars">handlebars</a>, <a href="https://daringfireball.net/projects/markdown/" referrerpolicy="no-referrer" rel="noopener noreferrer" target="_blank" title="markdown">markdown</a>, <a href="https://jekyllrb.com/docs/front-matter/" referrerpolicy="no-referrer" rel="noopener noreferrer" target="_blank" title="frontmatter">frontmatter</a>,  and bunch of methods to properly process obsidian notes. The blog implementation is up to you. It's quite easy, but it requires some codding skills.</p>
<p><img alt="Lets Go" src="/static/lets-go.jpg" width="100%" /></p>
<h2>Installation</h2>
<p>The simplest way is to run:</p>
<pre><code>pip install obsidian-blog
</code></pre>
<h2>Usage</h2>
<h3>Usage Example</h3>
<p>To build a blog, just run <code>obsidian-blog</code> against properly configured vault. Your blog will be built to the static files within the <code>_build</code> directory, or whatever you configure your <code>DEST_DIR</code>.</p>
<h3>Live Updates</h3>
<p>There is no hot content reload, but you can get updates more convenient by running <code>obsidian-blog</code> every n seconds, like below:</p>
<pre><code class="language-bash">while true; do obsidian-blog; sleep 5; done
</code></pre>
<h3>Directory Structure</h3>
<p>The first thing you need to do is to create a <code>_blog</code> directory in the root of your vault with a structure like on the listing below. The simplest way is to copy it from this example vault. </p>
<pre><code>_blog
├── Post.md
├── _assets
│   └── styles.css
├── _layouts
│   └── main.hbs
└── _pages
    ├── about.hbs
    └── index.hbs
</code></pre>
<p>Now let me briefly explain each directory inside of <code>_blog</code>:
- <code>_assets</code> are static files, such as <code>css</code>, <code>js</code> or images are always being copied into resulting build.
- <code>_layouts</code> is a room for handlebars layout files. You can specify different layouts for diferent pages and posts by setting <code>layout: &lt;layout_name&gt;</code> in the <a href="https://jekyllrb.com/docs/front-matter/" referrerpolicy="no-referrer" rel="noopener noreferrer" target="_blank" title="yaml-frontmatter">yaml-frontmatter</a> part of the file.
- <code>_pages</code> is where handlebars page templates live. Like <code>about</code>, <code>contacts</code>, <code>all-posts</code>, <code>my cv</code> and so on.</p>
<p>Note, that there is no <code>posts</code> directory, because, all your posts lives right inside the <code>_blog</code> directory.</p>
<h2>Environment variables</h2>
<p><code>.env</code>-file is a way to configure your blog. This is the list of supported env-vars:</p>
<ul>
<li><code>BLOG_TITLE</code> (default: <code>None</code>)</li>
<li><code>DEST_DIR</code> (default: <code>_build</code>) is a directory your blog is build to.</li>
<li><code>SOURCE_DIR</code> (default: <code>_blog</code>) is a root directory of your blog.</li>
<li><code>LAYOUTS_DIR</code> (default: <code>${SOURCE_DIR}/_layouts</code>) for handlebars layouts.</li>
<li><code>PAGES_DIR</code> (default: <code>${SOURCE_DIR}/_pages</code>) for handlebars pages.</li>
<li><code>ASSETS_DIR</code> (default: <code>${SOURCE_DIR}/_assets</code>) for static files to be copied into the build.</li>
<li><code>ASSETS_DEST_DIR</code> (default: <code>static</code>) this is the path under <code>DEST_DIR</code> your static files and images from the posts are copied to.</li>
</ul>
<h2>Entities</h2>
<h3>Layouts</h3>
<p>Layouts are old good handlebars layouts compiled with a <code>global_context</code> and <code>page_context</code> or <code>post_context</code> accordingly. There is a simple example layout renders links to all pages and a content.</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;title&gt;{{ title }}&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;{{ config.ASSETS_PATH }}/styles.css&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1 class=&quot;menu__header&quot;&gt;
      &lt;a href=/&gt;{{ config.BLOG_TITLE }}&lt;/a&gt;
    &lt;/h1&gt;
    &lt;div class=&quot;menu&quot;&gt;
      &lt;ul class=&quot;links&quot;&gt;
        {{#each pages}}
          &lt;li class=&quot;link&quot;&gt;
            &lt;a href=&quot;/{{this.slug}}&quot;&gt;{{this.meta.title}}&lt;/a&gt;
          &lt;/li&gt;
        {{/each}}
      &lt;/ul&gt;
    &lt;/div&gt;
    &lt;div class=&quot;content&quot;&gt;
      &lt;div class=&quot;page&quot;&gt;
        {{{ content }}}
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>In a post or a page, you can specify which one you'd like to use to render the content within the yaml-frontmatter block:</p>
<pre><code>---
title: Hello World
date: 2021-01-09
layout: main
---
</code></pre>
<p>If layout is not specified, <code>main</code> will be used as default one.</p>
<h3>Pages</h3>
<p>Pages are handlebars templates support a yaml-frontmatter section. Pages stands for anything but posts. </p>
<p>This is an example of <code>index.hbs</code> page renders all posts from the blog:</p>
<pre><code class="language-handlebars">---
title: Posts
---
&lt;h1&gt;{{ meta.title }}&lt;/h1&gt;
&lt;ul&gt;
  {{#each posts}}
      &lt;li&gt;
        &lt;span&gt;[{{ this.meta.date }}]: &lt;/span&gt;
        &lt;a href={{this.slug}}&gt;{{ this.meta.title }}&lt;/a&gt;
      &lt;/li&gt;
  {{/each}}
&lt;/ul&gt;

</code></pre>
<h3>Page Context</h3>
<p>This is the page context can be used in a template:</p>
<pre><code>{
  &quot;file&quot;: str, # filename
  &quot;slug&quot;: str,  # url, generated by sluggifying the filename
  &quot;meta&quot;: dict[str, any], # the frontmatter section goes here
}
</code></pre>
<p>And also you can get an array contains all pages as part of the <code>global_context</code> from the <code>pages</code> variable in templates, which might be convenient to automatically make links to them in menu, etc.</p>
<h3>Posts</h3>
<p>Posts are just about content, so they are pretty streight forward markdown-files with the frontmatter blocks.</p>
<pre><code class="language-yaml">---
title: Hello World
published: True
date: 2021-01-09
layout: main
---

# Hello World

[[WikiLink to a note]]
![[Image.png]]
</code></pre>
<p>All wikilinks in a post are inlined and all images are copied to <code>ASSETS_DEST_DIR</code> during the build. Inlining works like in obsidian by a glob <code>**/{post}.md</code> from the root of the vault. For images it's almost same, with only the difference they're requiring extension to be in the link.</p>
<h3>Posts Context</h3>
<p>This is the post context in the templates:</p>
<pre><code>{
  &quot;file&quot;: str, # filename
  &quot;slug&quot;: str, # url, generated by sluggifying the filename
  &quot;html&quot;: str, # rendered html of the post
  &quot;meta&quot;: Meta, # frontmatter metadata
  &quot;imgs&quot;: list[Image], # list of images in the post
})

</code></pre>
<p>As well as for pages, all posts are included to the <code>posts</code> variable of the <code>global_context</code>, which was shown before in the <code>main.hbs</code> layout example.</p>
<h3>Images</h3>
<p>Images are processed in 2 steps:</p>
<ol>
<li><strong>Parsing step</strong>.<ul>
<li>Parser inlines all wikilinks into the post</li>
<li>Parser collects all images used in the post</li>
<li>Parser updates image links in the post markdown according to the <code>ASSETS_DEST_DIR</code></li>
</ul>
</li>
<li><strong>Build step</strong> where builder just takes <code>imgs</code> from the post and copies it to the <code>ASSETS_DEST_DIR</code></li>
</ol>
<h3>Image Context</h3>
<p>Images are part of a <code>post_context</code> and may be accessible in templates from <code>post.imgs</code> list.</p>
<pre><code>{
  &quot;file&quot;: str,
  &quot;slug&quot;: str, # generated from the sluggified filename
  &quot;name&quot;: str, # generated from the filename
  &quot;placeholder&quot;: str, # mediawiki image placeholder like ![[Image.png]]
}
</code></pre>
<h3>Global Context</h3>
<p><code>global_context</code> is always accessible in all handlebars templates (layouts, pages)  and includes few variables:</p>
<pre><code>{
  &quot;config&quot;: {
    &quot;ASSETS_PATH&quot;: &quot;/${ASSETS_DEST_DIR}&quot;,
    &quot;BLOG_TITLE&quot;: BLOG_TITLE,
  },
  &quot;layouts&quot;: dict[str, Layout],
  &quot;posts&quot;: list[Post],
  &quot;pages&quot;: list[Page],
})
</code></pre>
<p>For pages and posts global context is merged with <code>page_context</code> and <code>post_context</code> accordingly.</p>
<h2>Advanced Tricks</h2>
<p>[[GitHub Pages Deployment with Actions]]</p>
      </div>
    </div>
  </body>
</html>

